!function(){"use strict";function parseUri(a){for(var b=parseUri.options,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d}function Persister(){this.clickDtos=[],this.pageDtos=[],this.isClickLoaded=!1,this.isPageLoaded=!1,this.updateMode=!1,this.streamEvent=function(a,b){if(null!=a&&!a.doNotStream)if(window.pointillist&&window.pointillist.args&&"TESTMODE"==window.pointillist.args[2]){var c=null,d=null,e=!1;null!=b.parent?(c=b.parent.name,d=b.parent.type,null==d&&(d=b.type),e=b.parent.pointillistTest):(c=b.name,d=b.type,e=b.pointillistTest),("View Page"!=d||e)&&window.postMessage({event:JSON.stringify(a),eventName:c,eventType:d},"*")}else{var f=new Date,g=1+f.getUTCMonth(),h=f.getUTCFullYear()+"-"+g+"-"+f.getUTCDate()+" "+f.getUTCHours()+":"+f.getUTCMinutes()+":"+f.getUTCSeconds()+"+0000";a.putFlexdata("sendTime",h),this.sendEvent(a)}},this.getConsumableData=function(){return window.pointillist&&window.pointillist.consumableData&&window.pointillist.consumableData?window.pointillist.consumableData:""},this.getClickDTOs=function(){return this.isClickLoaded||this.loadClickEventDefinitions(),this.clickDtos},this.getPageDTOs=function(){return this.isPageLoaded||this.loadPageEventDefinitions(),this.pageDtos},this.loadPageEventDefinitions=function(){var a=this.getConsumableData();if(a&&a.eventDefinitions&&a.eventDefinitions.page&&a.eventDefinitions.page.length>0)for(var b=0;b<a.eventDefinitions.page.length;b++)this.pageDtos.push(this.createDTOFromDef(a.eventDefinitions.page[b]));this.isPageLoaded=!0},this.loadClickEventDefinitions=function(){var a=this.getConsumableData();a&&a.eventDefinitions&&this.createEventsFromDefs(a.eventDefinitions.element,this.clickDtos),this.isClickLoaded=!0},this.createEventsFromDefs=function(a,b){var c=0;for(var d in a){for(var e=a[d],f=[],g=0;g<e.length;g++){var h=e[g],i=this.createDTOFromDef(h);f.push(i)}c++,b[d]=f}},this.createDTOFromDef=function(a){var b=new EventDTO;if(b.name=a.name,b.customAttributes=a.customAttributes,b.filters=a.filters,b.id=a.id,b.eventTypeId=a.eventTypeId,b.target=a.target,b.targets=[],b.pointillistTest=a.pointillistTest,null==a.targets){var c=new EventTargetDTO(b),d=a;c.parentSelector=d.parentValue,c.childSelector=d.childSelector,c.type=a.type,null!=d.parentValue&&""!=d.parentValue&&(b.parentSelector=d.parentValue),null!=d.childValue&&""!=d.childValue&&(b.childSelector=d.childValue),c.customAttributes=d.customAttributes,c.filters=d.filters,c.pageURL=d.pageURL,c.target.value=d.target.value,c.targetValue=d.targetValue,c.matchType=d.matchType,c.targetUrlPattern=d.targetUrlPattern,c.isParentRecursiveEvent=d.isParentRecursiveEvent,b.targets.push(c)}else for(var e=0;e<a.targets.length;e++){var c=new EventTargetDTO(b),d=a.targets[e];d&&(c.parentSelector=d.parentSelector,c.childSelector=d.childSelector,c.type=d.type,c.groupId=d.groupId,null!=d.parentValue&&""!=d.parentValue&&(b.parentSelector=d.parentValue),null!=d.childValue&&""!=d.childValue&&(b.childSelector=d.childValue),c.customAttributes=d.customAttributes,c.filters=d.filters,c.pageURL=d.pageURL,c.target.value=d.target.value,c.targetValue=d.targetValue,c.isParentRecursiveEvent=d.isParentRecursiveEvent,c.matchType=d.matchType,c.targetUrlPattern=d.targetUrlPattern,b.targets.push(c))}return b.targetValue=a.targetValue,b.targetLocationUri=a.targetLocationUri,b.pageURL=a.pageURL,b.pageId=a.pageId,b.version=a.version,b.parentSelector=a.parentValue,b.isParentRecursiveEvent=a.isParentRecursiveEvent,null!=a.parentValue&&""!=a.parentValue&&(b.parentSelector=a.parentValue),b.childSelector=a.childValue,null!=a.childValue&&""!=a.childValue&&(b.childSelector=a.childValue),b.streamEvent=a.streamFlag,"View Page"==a.type?(b.isPageViewEvent=!0,b.matchType=a.matchType):null!=a.childValue&&a.childValue.indexOf("*")!=-1?(b.isParentChildEvent=!0,b.isParentRecursiveEvent=!0):null!=a.childValue&&a.childValue.indexOf("*")==-1&&(b.isParentChildEvent=!0,b.isChildPatternEvent=!0),b},this.saveDTO=function(a,b,c){(this.isLoaded=!1)&&this.load(),this.addEvent(this.createEventPayload(a,c),b,c)},this.createEventPayload=function(a,b){if(a.targets)for(var c=0;c<a.targets.length;c++)a.targets[c]&&(a.targets[c].parent=null);var d=this.createEvent(a,b);if(d){var e=null;if(e="View Page"==a.type?this.getPageDTOs():this.getClickDTOs(),this.updateMode){for(var f in e)if(null!=f.length)for(var c=0;c<f.length;c++)if(f[c].name==a.name){f[c]=a;break}}else e.push(a);return JSON.stringify(d)}},this.createEvent=function(a,b){var c={};if(c.id=a.id?a.id:"",c.version="1.0.0",null!=a.targets&&(c.version="2.0.0"),c.name=a.name,null==a.name)return null;for(var d="\\'/\"",e=0;e<d.length;e++)if(a.name.indexOf(d[e])!=-1)return b("Illegal Characters"),null;if(c.target={},c.target.source={},c.target.source.type="DOM",c.target.op="eq",a.isPageViewEvent||"View Page"==a.type?(c.target.source.name="Page",c.target.value=a.target.value,c.targetValue=a.targetValue,c.matchType=a.matchType):(c.target.source.name="element",c.target.value=a.target.value,c.targetValue=a.targetValue),c.childValue=a.childSelector,c.parentValue=a.parentSelector,c.pageId=a.pageURL,c.targetLocationUri=a.pageURL,null!=a.targets){c.targets=[];for(var e=0;e<a.targets.length;e++)a.targets[e]&&c.targets.push(a.targets[e]);c.type=c.targets[0].type}else c.filters=a.filters,c.customAttributes=a.customAttributes,c.type=a.type;return c.streamFlag=!0,c},this.addEvent=function(a,b,c){a&&this.sendPayload(a,b,c)},this.createRequest=function(){var a=null;return window.XMLHttpRequest?(a=new XMLHttpRequest,"undefined"!=typeof a.overrideMimeType&&a.overrideMimeType("text/xml")):window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a},this.sendEvent=function(a){var b=null;if(window.pointillist.dpEndpoint)b=window.pointillist.dpEndpoint;else{if(!window.pointillist.streamEventEndpoint){a&&a.eventType?a.eventType:"",a&&a.flexdata&&a.flexdata.load_stepid?a.flexdata.load_stepid:"";return}b=window.pointillist.streamEventEndpoint}var c=this.createRequest();c.onreadystatechange=function(){if(4==c.readyState)if(200!=c.status){c.response}else 200==c.status},c.open("POST",b,!0),c.withCredentials=!1,c.setRequestHeader("content-type","text/plain;charset=UTF-8"),c.setRequestHeader("Accept","application/json;charset=UTF-8"),c.setRequestHeader("apiToken",pointillist.apiToken||window.pointillist.apiToken),c.send(JSON.stringify(a))},this.sendPayload=function(a,b,c){var d=[window.pointillist.args[0],"/api/analytics/",0==this.updateMode?"create-event":"update-event"].join(""),e=this.createRequest();e.withCredentials=!0,e.onreadystatechange=function(){if(4==e.readyState)if(401==e.status||0==e.status){if(location.href.indexOf(api.endPointURI)==-1){var a=window.pointillist.args[4];null!=a&&"null"!=a||(api.storeValue(location.href),location.href.indexOf(api.endPoint)==-1&&(location.href=api.endPointURI+"/datacurator/dashboard"))}}else if(200!=e.status){var d=e.response;c(null==d?"Failed to save to server. Check console for details":d.message)}else 200==e.status&&b()},e.open("POST",d,!0),this.setRequestHeaders(e),e.send(a)},this.setRequestHeaders=function(a){a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Accept","application/json;charset=UTF-8"),a.responseType="json"}}function EventTargetDTO(a){var b={};return b.parent=a,b.parentSelector="",b.childSelector="",b.target={},b.target.value="",b.matchType="wildcard",b.targetValue="",b.customAttributes=[],b.filters=[],b.pageURL=null,b.isParentRecursiveEvent=!1,b.targetUrlPattern="",b.type=null,b.getTarget=function(){return b.target.value},b.getEventType=function(){return b.type},b.setEventType=function(a){b.type=a},b.getParentSelector=function(){return b.parentSelector},b.setParentSelector=function(a){b.parentSelector=a},b.setChildSelector=function(a){b.childSelector=a},b.getChildSelector=function(){return b.childSelector},b.getPageURL=function(){return b.pageURL},b.getCustomAttributes=function(){return b.customAttributes},b.getFilters=function(){return b.filters},b.isParentRecursive=function(){return b.isParentRecursiveEvent},b.getMatchType=function(){return b.matchType},b.getTargetUrlPattern=function(){return b.targetUrlPattern},b.setTargetUrlPattern=function(a){b.targetUrlPattern=a},b}function EventDTO(){var a={};return a.id="",a.name=null,a.matchType="wildcard",a.version=null,a.isPageViewEvent=!1,a.isParentChildEvent=!1,a.isChildPatternEvent=!1,a.targetLocationUri="",a.streamEvent="false",a.targetOffset=0,a.target={},a.target.value="",a.targetValue="",a.targets=[],a.eventTypeId="",a.getTargets=function(){return a.targets},a.getTargetsCount=function(){return a.targets.length},a.addTarget=function(){var b=new EventTargetDTO(a);return a.targets.push(b),b},a.removeTarget=function(b){a.targets.splice(b,1)},a.getVersion=function(){return a.version},a.isStream=function(){return a.streamEvent},a.getTargetLocationURI=function(){return a.targetLocationUri},a.getID=function(){return a.id},a.getName=function(){return a.name},a.getCustomAttributes=function(){return a.getValidTarget().customAttributes},a.getAllCustomAttributes=function(){for(var b=[],c=0;c<a.targets.length;c++)for(var d=a.targets[c],e=0;e<d.customAttributes.length;e++)b.push(d.customAttributes[e]);return b},a.getCustomAttributesForTarget=function(b){return a.targets[b-a.targetOffset].customAttributes},a.getFilters=function(){return a.getValidTarget().filters},a.getFiltersForTarget=function(b){return a.targets[b-a.targetOffset].filters},a.getPageURL=function(){return a.getValidTarget().pageURL},a.getPageURLByIndex=function(b){return a.targets[b-a.targetOffset].pageURL},a.getTarget=function(){return a.target.value},a.getTargetSourceType=function(){return a.getValidTarget().target.source.type},a.setTarget=function(b){if(""==a.target.value)a.target.value=b,a.targetValue=b;else{if(a.target&&a.target.value&&a.target.value.indexOf(b)!=-1)return;a.target.value+=","+b,a.targetValue+=","+b}},a.getTargetByIndex=function(b){return a.targets[b-a.targetOffset].target.value},a.getTargetSourceTypeByIndex=function(b){return a.targets[b-a.targetOffset].target.source.type},a.setTargetByIndex=function(b,c){a.targets[b-a.targetOffset].target.value=c,a.targets[b-a.targetOffset].targetValue=c},a.isPageView=function(){return a.isPageViewEvent},a.isParentChild=function(){return a.isParentChildEvent},a.isChildPattern=function(){return a.isChildPatternEvent},a.getParentSelector=function(){return a.getValidTarget().parentSelector},a.setParentSelector=function(b){a.getValidTarget().parentSelector=b},a.getChildSelector=function(){return a.getValidTarget().childSelector},a.setChildSelector=function(b){a.getValidTarget().childSelector=b},a.getParentSelectorByIndex=function(b){return a.targets[b-a.targetOffset].parentSelector},a.setParentSelectorByIndex=function(b,c){a.targets[b-a.targetOffset].parentSelector=c},a.getChildSelectorByIndex=function(b){return a.targets[b-a.targetOffset].childSelector},a.setChildSelectorByIndex=function(b,c){a.targets[b-a.targetOffset].childSelector=c},a.getMatchType=function(){return a.matchType},a.setMatchTypeByIndex=function(b,c){a.targets[b-a.targetOffset].matchType=c},a.getValidTarget=function(){for(var b=0;b<a.targets.length;b++)if(a.targets[b])return a.targets[b]},a.getEventTypeId=function(){return a.eventTypeId},a.setEventTypeId=function(b){a.eventTypeId=b},a}function PageViewStreamer(a,b){this.utillities=a,this.persister=b,this.handleEvent=function(a,b,c,d,e){var f=[];f[0]=EVENT_ATTRIBUTES.CommonEventAttributes;var g=this.utillities.prepareEventForStreaming(a,b,f,this,null,c,d,!1,e);g=this.utillities.addEventValue(a,g),this.persister.streamEvent(g,b)},this.resolveAttributeNode=function(a,b){var c=window.pointillist.Sizzle(a.target.value)[0];return c}}function GlobalEventStreamer(a,b){this.utillities=a,this.persister=b,this.handleEvent=function(a,b,c,d,e,f){var g=this.utillities.prepareEventForStreaming(a,b,c,this,null,d,e,!1,f);g=this.utillities.addEventValue(a,g),this.persister.streamEvent(g,b)},this.resolveAttributeNode=function(a,b,c){if(null==a.isChild||0==a.isChild){var d=window.pointillist.Sizzle(a.target.value)[0];return d}var e=(a.target.value,a.target.value),f=null;if(null==c.getChildSelector()||null==c.getParentSelector())return null;if(null!=c.getChildSelector()){var g=c.parentSelector,h=window.pointillist.Sizzle(g);h=h[0];var i=c.parentSelector.indexOf("*")>-1?c.parentSelector.substring(0,c.parentSelector.indexOf("*")):c.parentSelector,j=i+" "+e;window.pointillist.Sizzle.matchesSelector(b,j)&&(f=b),null==f&&(f=this.utillities.findClosestMatch(h,b,j))}return f}}function ChildPatternStreamer(a,b){this.utillities=a,this.persister=b,this.handleEvent=function(a,b,c,d,e,f){var g=this.utillities.prepareEventForStreaming(a,b,c,this,null,d,e,!1,f);g=this.utillities.addEventValue(a,g),this.persister.streamEvent(g,b)},this.resolveAttributeNode=function(a,b,c){if(null==a.isChild||0==a.isChild){var d=window.pointillist.Sizzle(a.target.value)[0];return d}var e=(a.target.value,a.target.value),f=null;if(null==c.getChildSelector()||null==c.getParentSelector(),c&&null!=c.getChildSelector()){var g=window.pointillist.Sizzle(c.getParentSelector());g=g[0];var h=c.getParentSelector()+" "+e;window.pointillist.Sizzle.matchesSelector(b,h)&&(f=b),null==f&&(f=this.utillities.findClosestMatch(g,b,h))}return f}}function StreamListener(a){var b=this;b.loadEventSent=!1,b.utillities=new Utillities,b.persister=new Persister,b.pageViewStreamer=new PageViewStreamer(b.utillities,b.persister),b.globalEventStreamer=new GlobalEventStreamer(b.utillities,b.persister),b.childPatternStreamer=new ChildPatternStreamer(b.utillities,b.persister),b.newSession=a,b.sentWPStartOnThisPage=!1,b.currentStep=1,b.pageEventLoad=function(a){null!=pointillist.streamer&&(pointillist.streamer.currentStep=3),b.pageLoad(a)},b.pageLoad=function(a){if(1!=b.loadEventSent){3==b.currentStep&&(b.loadEventSent=!0);var c=[];c[0]=EVENT_ATTRIBUTES.CommonEventAttributes,b.loadEvent=a,b.sendStartEvent(a);var d=""+window.location.host+window.location.pathname;a&&(d=a.target),b.handleEvent(a,b.findPageDefinition(d),c,b.currentStep,3)}},b.sendStartEvent=function(a){var c=[];if(c[0]=EVENT_ATTRIBUTES.CommonEventAttributes,1==b.newSession&&b.currentStep>1&&0==b.sentWPStartOnThisPage){var d=new EventDTO;d.type="View Page",d.name="WP - Visit Started";var e=""+window.location.host+window.location.pathname;d.target={},d.setTarget(e),d.pageId=e,d.addTarget(),d.targets[0].target.value=e;var f=[];d.parent=d,f.push(d),b.handleEvent(a,f,c,b.currentStep,b.currentStep),b.sentWPStartOnThisPage=!0}},b.getConsumableData=function(){var a=a?a:window.pointillist;return a&&a.consumableData&&a.consumableData?a.consumableData:""},b.bodyClick=function(a){var c=[];c[0]=EVENT_ATTRIBUTES.CommonEventAttributes,"click"==a.type?c[1]=EVENT_ATTRIBUTES.ClickEventAttributes:"change"==a.type?c[1]=EVENT_ATTRIBUTES.ChangeEventAttributes:"submit"==a.type&&(c[1]=EVENT_ATTRIBUTES.SubmitEventAttributes),b.handleEvent(a,b.findEventDefinition(a.type,a.target),c,b.currentStep,b.currentStep)},b.findPageDefinition=function(a){var c=b.persister.getPageDTOs();return b.utillities.findMatchingPageDefinitions(a,c)},b.findEventDefinition=function(a,c){var d=b.persister.getClickDTOs(),e=[],f=!0;for(var g in d){f=!1;var h=g,i=d[h],j=(" "+h).slice(1),k=c===document||window.pointillist.Sizzle.matchesSelector(c,j);if(!k)if(j.indexOf(",")==-1)j.indexOf("*")==-1&&(j+=" *",k=c===document||window.pointillist.Sizzle.matchesSelector(c,j));else for(var l=j.split(","),m=0;m<l.length;m++){var n=l[m];if(n.indexOf("*")==-1&&(n+=" *",k=c===document||window.pointillist.Sizzle.matchesSelector(c,n)))break}if(k)for(var o=0;o<i.length;o++){var p=o,q=i[p];if(q)if(q.targets)for(var m=0;m<q.targets.length;m++){var r=q.targets[m],s=null,t=r.targetUrlPattern;if(null==t||""==t||0!=b.utillities.isURLMatched(t,r.matchType)){if(null!=r.target.value&&""!=r.target.value)s=r.target.value;else{var s=q.target.value,u=s.split(",");s=u.length==q.targets.length?u[m]:q.target.value}if((0!=window.pointillist.Sizzle.matchesSelector(c,s)||s.indexOf("*")==-1&&0!=window.pointillist.Sizzle.matchesSelector(c,s+" *"))&&r.type&&("click on"==r.type.toLowerCase()&&("click"==a||"onclick"==a)||"change on"==r.type.toLowerCase()&&("change"==a||"onchange"==a)||"view page"==r.type.toLowerCase()&&("load"==a||"onload"==a)))if(r.filters&&r.filters.length>0){for(var v=!0,w=0;v&&w<r.filters.length;w++){var x=r.filters[w];if(v=b.utillities.isFilterMatched(x,c),!v)break}v&&e.push(r)}else e.push(r)}}else{var r=q,t=r.targetUrlPattern;if(null!=t&&""!=t&&0==b.utillities.isURLMatched(t,r.matchType))continue;if(r.type&&("click on"==r.type.toLowerCase()&&("click"==a||"onclick"==a)||"change on"==r.type.toLowerCase()&&("change"==a||"onchange"==a)||"view page"==r.type.toLowerCase()&&("load"==a||"onload"==a)))if(r.filters&&r.filters.length>0){for(var v=!0,w=0;v&&w<r.filters.length;w++){var x=r.filters[w];if(v=b.utillities.isFilterMatched(x,c),!v)break}v&&e.push(r)}else e.push(r)}}}return e},b.handleEvent=function(a,c,d,e,f,g){if(null!==c&&0!==c.length){pointillist.runtime=pointillist.runtime||{},a&&(pointillist.runtime.currentTargetElement=a.target);for(var h=0;h<c.length;h++){var i=c[h];try{if(!i)continue;var j=i.type,k=i.getParentSelector();null==k&&i.targets&&i.targets.length>0&&(k=i.targets[0].getParentSelector()),null==j&&i.targets&&i.targets.length>0&&(j=i.targets[0].type),"View Page"==j?b.pageViewStreamer.handleEvent(a,i,e,f,g):null==k||""==k?b.globalEventStreamer.handleEvent(a,i,d,e,f,g):b.childPatternStreamer.handleEvent(a,i,d,e,f,g)}catch(a){var l=null;l=null!=i.parent?i.parent.name:i.name}}}},b.createEventListeners=function(){window.addEventListener?(window.addEventListener("click",b.bodyClick,!0),window.addEventListener("change",b.bodyClick,!0),window.addEventListener("submit",b.bodyClick,!0),window.addEventListener("hashchange",b.pageLoad,!0),window.addEventListener("load",b.pageEventLoad,!0),window.addEventListener("mousemove",b.mouseMove,!0),window.addEventListener("keypress",b.keyPress,!0)):window.attachEvent&&(window.attachEvent("onclick",b.bodyClick,!0),window.attachEvent("onchange",b.bodyClick,!0),window.attachEvent("onsubmit",b.bodyClick,!0),window.attachEvent("onhashchange",b.pageLoad,!0),window.attachEvent("onload",b.pageEventLoad,!0),window.attachEvent("onmousemove",b.mouseMouse,!0),window.attachEvent("onkeypress",b.keyPress,!0))},b.removeEventListeners=function(){window.addEventListener?(window.removeEventListener("click",b.bodyClick,!0),window.removeEventListener("change",b.bodyClick,!0),window.removeEventListener("submit",b.bodyClick,!0),window.removeEventListener("hashchange",b.pageLoad,!0),window.removeEventListener("mousemove",b.moveMouse,!0),window.removeEventListener("keypress",b.keyPress,!0)):window.attachEvent&&(window.detachEvent("onclick",b.bodyClick,!0),window.detachEvent("onchange",b.bodyClick,!0),window.detachEvent("onsubmit",b.bodyClick,!0),window.detachEvent("onhashchange",b.pageLoad,!0),window.detachEvent("onmousemove",b.moveMouse,!0),window.detachEvent("onkeypress",b.keyPress,!0))},b.mouseMove=function(a){analyticsUtil.setOrRefreshPointillistSessionId()},b.keyPress=function(a){analyticsUtil.setOrRefreshPointillistSessionId()}}function Pointillist_Streamer(a){var b=new StreamListener(a);return b.createEventListeners(),b}function AnalyticsUtility(){var a={};return a.FILTER_TYPES={EQ:"eq",NEQ:"neq",CONTAINS:"contains",DOES_NOT_CONTAIN:"does not contain",IS_DEFINED:"is defined",IS_NOT_DEFINED:"is not defined",WILDCARD_MATCHES:"wildcard matches",WILDCARD_DOES_NOT_MATCH:"wildcard does not match",REGEXP_MATCHES:"regexp matches",REGEXP_DOES_NOT_MATCH:"regexp does not match"},a.findClosestMatch=function(b,c,d){for(var e=c;b!=e;){var f=a.isInTree(e,d);if(f)return f;e=e.parentElement}return null},a.isInTree=function(b,c){if(window.pointillist.Sizzle.matchesSelector(b,c))return b;for(var d=0;d<b.childNodes.length;d++)if(1==b.childNodes[d].nodeType){var e=a.isInTree(b.childNodes[d],c);if(e)return e}return null},a.isEmpty=function(a){return null==a||void 0==a||(""===a||(a=""+a,null==a.trim||""===a.trim()))},a.countTags=function(a,b){for(var c=0,d=0;d<a.childNodes.length;d++)a.childNodes[d].tagName==b&&c++;return c},a.findTagOrdinal=function(a,b){for(var c=0,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b.tagName&&c++,a.childNodes[d]==b)return c;return-1},a.getElementSelectorString=function(b,c,d){var e=b.tagName,f=b.parentElement,g=e;if(d&&a.countTags(f,e)>1&&(g+=":nth-of-type("+a.findTagOrdinal(f,b)+")"),c)return g;for(var h=b.className,i=h.split(" "),j=0;j<i.length;j++)""!=i[j]&&"hover"!=i[j]&&(g+="."+i[j]);return g},a.getFieldValue=function(a){var b=window.pointillist.Sizzle(a);if(b&&b.length>0){var c=b[0],d="";return c.nodeName&&"SELECT"===c.nodeName.toUpperCase()?d=c.options[c.selectedIndex].text:null!=c.value&&""!=c.value?d=c.value:null!=c.text&&""!=c.text?d=c.text:null!=c.innerText&&""!=c.innerText?d=c.innerText:null!=c.href&&""!=c.href?d=c.href:null!=c.src&&""!=c.src&&(d=c.src),d}},a.safeExtractNumber=function(a,b){if(b=b||void 0,!a)return b;var c=parseFloat((""+a).replace(/[^\d\.]/g,""));return isNaN(c)&&(c=b),c},a.applyFilter=function(b,c,d){switch(d!==a.FILTER_TYPES.REGEXP_MATCHES&&d!==a.FILTER_TYPES.REGEXP_DOES_NOT_MATCH&&(b&&null!==b&&(b=b.toUpperCase()),c&&null!==c&&(c=c.toUpperCase())),d){case a.FILTER_TYPES.EQ:return b===c;case a.FILTER_TYPES.NEQ:return b!==c;case a.FILTER_TYPES.CONTAINS:return!!b&&b.indexOf(c)>-1;case a.FILTER_TYPES.DOES_NOT_CONTAIN:return!b||b.indexOf(c)===-1;case a.FILTER_TYPES.WILDCARD_MATCHES:return!!c&&a.isWildCardMatches(b,c);case a.FILTER_TYPES.WILDCARD_DOES_NOT_MATCH:return!c||!a.isWildCardMatches(b,c);case a.FILTER_TYPES.REGEXP_MATCHES:return!!c&&a.isRegExpMatches(b,c);case a.FILTER_TYPES.REGEXP_DOES_NOT_MATCH:return!c||!a.isRegExpMatches(b,c);case a.FILTER_TYPES.IS_DEFINED:return!!b;case a.FILTER_TYPES.IS_NOT_DEFINED:return!b||"/"===b}return!1},a.isWildCardMatches=function(a,b){try{return new RegExp("^"+b.split("*").join(".*").split("?").join("\\?")+"$").test(a)}catch(a){}return!1},a.isRegExpMatches=function(a,b){try{return new RegExp(b).test(a)}catch(a){}return!1},a.getCookie=function(a){for(var b=document.cookie,c=a+"=",d=b.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0===f.indexOf(c))return f.substring(c.length,f.length)}return""},a.setPointillistCookieId=function(b){b=b?b:a.generateUniqueId();var c=new Date;c.setTime(c.getTime()+31536e7);var d=["_pointillist_cookie_id=",b,";expires=",c.toGMTString(),";path=/",";domain=",a.getRootDomain()];document.cookie=d.join("")},a.setTempPointillistCookieId=function(){var b=new Date;b.setTime(b.getTime()+346896e6);var c=["temp_pointillist_cookie_id=",a.generateUniqueId(),";expires=",b.toGMTString(),";path=/",";domain=",a.getRootDomain()];document.cookie=c.join("")},a.setOrRefreshPointillistSessionId=function(b){var c=a.getCookie("_pointillist_session_id");c||a.refreshSessionCookies(),c=!b&&c?c:a.generateUniqueId();var d=new Date;d.setTime(d.getTime()+18e5);var e=["_pointillist_session_id=",c,";","expires=",d.toGMTString(),";path=/",";domain=",a.getRootDomain()];document.cookie=e.join("")},a.refreshSessionCookies=function(){a.setTrafficSourceCookie(""),a.setLandingPageCookie(window.location.href),a.setUTM_CampaignCookie(""),a.setUTM_ContentCookie(""),a.setUTM_TermCookie(""),a.setUTM_MediumCookie(""),a.setUTM_SourceCookie("")},a.getParentDomain=function(b){return b?a.getRootDomain(b):b},a.getRootDomain=function(a){a=a?a:document.domain;for(var b=0,c=a.split("."),d="_pt"+(new Date).getTime();b<c.length-1&&document.cookie.indexOf(d+"="+d)==-1;)a=c.slice(-1-++b).join("."),document.cookie=d+"="+d+";domain="+a+";";return document.cookie=d+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+a+";",a},a.generateUniqueId=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b},a.getQueryVariable=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0].toUpperCase()==a.toUpperCase())return e[1]}return""},a.getUTM_Source=function(){var b=a.getQueryVariable("utm_source");return null==b||""==b?b=a.getUTM_SourceCookie():a.setUTM_SourceCookie(b),b},a.getUTM_Medium=function(){var b=a.getQueryVariable("utm_medium");return null==b||""==b?b=a.getUTM_MediumCookie():a.setUTM_MediumCookie(b),b},a.getUTM_Term=function(){var b=a.getQueryVariable("utm_term");return null==b||""==b?b=a.getUTM_TermCookie():a.setUTM_TermCookie(b),b},a.getUTM_Content=function(){var b=a.getQueryVariable("utm_content");return null==b||""==b?b=a.getUTM_ContentCookie():a.setUTM_ContentCookie(b),b},a.getUTM_Campaign=function(){var b=a.getQueryVariable("utm_campaign");return null==b||""==b?b=a.getUTM_CampaignCookie():a.setUTM_CampaignCookie(b),b},a.getUTM_CampaignCookie=function(){return a.getCookie("_pointillist_utm_campaign")},a.setUTM_CampaignCookie=function(b){a.setCookie("_pointillist_utm_campaign",b,!0)},a.getUTM_ContentCookie=function(){return a.getCookie("_pointillist_utm_content")},a.setUTM_ContentCookie=function(b){a.setCookie("_pointillist_utm_content",b,!0)},a.getUTM_TermCookie=function(){return a.getCookie("_pointillist_utm_term")},a.setUTM_TermCookie=function(b){a.setCookie("_pointillist_utm_term",b,!0)},a.getUTM_MediumCookie=function(){return a.getCookie("_pointillist_utm_medium")},a.setUTM_MediumCookie=function(b){a.setCookie("_pointillist_utm_medium",b,!0)},a.getUTM_SourceCookie=function(){return a.getCookie("_pointillist_utm_source")},a.setUTM_SourceCookie=function(b){a.setCookie("_pointillist_utm_source",b,!0)},a.getCurrentDomainCookie=function(){return a.getCookie("_pointillist_current_domain")},a.setCurrentDomainCookie=function(b){a.setCookie("_pointillist_current_domain",b,!0)},a.clearUTMCookies=function(){var b=a.getRootDomain();document.cookie="_pointillist_utm_source=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain="+b,document.cookie="_pointillist_utm_medium=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain="+b,document.cookie="_pointillist_utm_term=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain="+b,document.cookie="_pointillist_utm_content=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain="+b,document.cookie="_pointillist_utm_campaign=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain="+b},a.refreshUTMCookies=function(){a.clearUTMCookies(),a.getUTM_Campaign(),a.getUTM_Content(),a.getUTM_Term(),a.getUTM_Medium(),a.getUTM_Source()},a.getDomain=function(a){if(!a)return"";var b=a.indexOf("://"),c=a.substring(b+3,a.length),d=c.indexOf(":");return d==-1&&(d=c.indexOf("/")),d==-1&&(d=c.length),c=c.substring(0,d),d=c.indexOf("/"),d!=-1&&(c=c.substring(0,d)),c},a.getLandingPageCookie=function(){return a.getCookie("_pointillist_landing_page")},a.setLandingPageCookie=function(b){a.clearCookie("_pointillist_landing_page"),a.setCookie("_pointillist_landing_page",b,!0)},a.getReferringURLCookie=function(){return a.getCookie("_pointillist_referring_url")},a.setReferringURLCookie=function(b){a.clearCookie("_pointillist_referring_url"),a.setCookie("_pointillist_referring_url",b)},a.setTrafficSourceCookie=function(b){a.clearCookie("_pointillist_traffic_source"),a.setCookie("_pointillist_traffic_source",b,!0)},a.getTrafficSourceCookie=function(){return a.getCookie("_pointillist_traffic_source")},a.setCookie=function(b,c,d,e){c=c&&c.length>200?c.substring(0,200):c;var f=[b,"=",c,";","path=/"];if(d&&f.push(";domain="+a.getRootDomain()),e){var g=new Date;g.setTime(g.getTime()+18e5),f.push(";expires="+g.toGMTString())}document.cookie=f.join("")},a.resetCookie=function(){var b=["_pointillist_cookie=",JSON.stringify({mode:"create"}),";path=/;domain=",a.getRootDomain()];document.cookie=b.join("")},a.clearCookie=function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"},a}function Utillities(){var utillities={};return utillities.NONE="none",utillities.BLOCK="block",utillities.markedObjects=[],utillities.fragmentMap=[],utillities.PTL_ACTOR_SOURCE={GLOBAL:"GLOBAL",CUSTOM:"CUSTOM"},utillities.stopEventPropagation=function(a,b){a=a||window.event,a.stopPropagation?(a.stopPropagation(),b||a.preventDefault()):(a.cancelBubble=!0,a.returnValue=!1)},utillities.validateDate=function(a){var b=/^(19|20)\d{2}-(0[1-9]|1[0-2])-(0[1-9]|1\d|2\d|3[01])\s(0[0-9]|1[0-2]):([0-5][0-9]):([0-5][0-9])\+0000$/;return!!b.test(a)},utillities.parseNum=function(a,b){var c=a.match(/[ ,.]?[0-9][0-9]*[ ,.]?([0-9][0-9]*[ ,.]?)*/g),d=c?"":null;if(c){for(var e=0;e<c.length;e++)c[e].replace(/ /g,"").length>d.length&&(d=c[e].replace(/ /g,""));var f=d.replace(/[,.](?=.*[.,])/g,""),g=f.match(/[.,]/);d=g?b||","!=g[0]||3!=f.split(g[0])[1].length?b&&"."==g[0]&&3==f.split(g[0])[1].length?f.replace(".",""):f.replace(",","."):f.replace(",",""):f}return d?1*d:d},utillities.findMatchingPageDefinitions=function(a,b){var c=[],d=[];if(b.length>0){for(var e=0;e<b.length;e++)for(var f=b[e],g=(f.targetValue?f.targetValue.split(","):"",0);g<f.targets.length;g++){var h=f.targets[g];if(h.targetNum=g,h){var i=!(!h.targetValue||"^"!=h.targetValue.slice(-1)||"regexp"==h.matchType);if(utillities.isURLMatched(h.targetValue,h.matchType))if(h.getFilters()&&h.getFilters().length>0){for(var j=!0,k=0;j&&k<h.getFilters().length;k++){var l=h.getFilters()[k];if(j=utillities.isFilterMatched(l,a),!j)break}j&&(i?d.push(h):c.push(h))}else i?d.push(h):c.push(h)}}return utillities.getPrecisePageList(c,d)}return null},utillities.getPrecisePageList=function(a,b){if(a&&a.length>0||!b||0==b.length)return a;for(var c=[b[0]],d="",e=0,f=0;f<b.length;f++)d=pointillist.getUriParser(b[f].targetValue),d&&d.path&&d.path.length>e&&(e=d.path.length,c[0]=b[f]);return c},utillities.addEventValue=function(a,b,c){var d=null;if(a&&(d=a.target),null==d)return b;var e="";return null!=d.value&&""!=d.value?e=d.value:null!=d.text&&""!=d.text?e=d.text:null!=d.innerText&&""!=d.innerText?e=d.innerText:null!=d.alt&&""!=d.alt?e=d.alt:null!=d.href&&""!=d.href?e=d.href:null!=d.src&&""!=d.src&&(e=d.src),e=e.replace(/^\s+|\s+$/gm,""),e?b.putLabel("eventValue",e):c&&b.putLabel("<span class='pntlst-err-value'>eventValue</span>",e),b},utillities.prepareEventForStreaming=function(a,b,c,d,e,f,g,h,i){var j=null,k=null,l="";null!=b.parent?(j=b.parent.name,l=b.parent.eventTypeId):(j=b.name,l=b.eventTypeId),null!=b.type?k=b.type:null!=b.parent&&null!=b.parent.type&&(k=b.parent.type);var m=new PointillistEvent(j,pointillist.apiToken||window.pointillist.apiToken,k,i);if(!h){if(m.putActor("SESSION","SESSION ID",pointillist.getPointillistSessionID()),window.pointillist.primaryActor?(m.putActor(window.pointillist.primaryActor,"Pointillist Session ID",pointillist.getPointillistSessionID()),m.putActor(window.pointillist.primaryActor,"Pointillist Cookie ID",pointillist.getPointillistCookieID())):(m.putCustomerActor("Pointillist Session ID",pointillist.getPointillistSessionID()),m.putCustomerActor("Pointillist Cookie ID",pointillist.getPointillistCookieID())),window.pointillist.actorIdsMapping){for(var n="",o="",p=Object.keys(window.pointillist.actorIdsMapping),q=0;q<p.length;q++)p[q]&&("pointillist session id"===p[q].toLowerCase()?n=window.pointillist.actorIdsMapping[p[q]]:"pointillist cookie id"===p[q].toLowerCase()&&(o=window.pointillist.actorIdsMapping[p[q]]));if(n&&n.length>0)for(var q=0;q<n.length;q++)n[q]&&m.putActor(n[q],"Pointillist Session ID",pointillist.getPointillistSessionID());if(o&&o.length>0)for(var q=0;q<o.length;q++)o[q]&&m.putActor(o[q],"Pointillist Cookie ID",pointillist.getPointillistCookieID())}m.putLabel("Channel","Web"),m.putLabel("ActionType",k),m.putFlexdata("eventTypeId",l)}this.processArrayAttributes(m,c),m.eventType=j,window._ptlt&&a&&(window._ptlt.setFocusedElement(a.target),window._ptlt.setDomEvent(a)),utillities.processCustomAttributes(a,m,b,d,e),window._ptlt&&a&&(window._ptlt.clearFocusedElement(),
window._ptlt.clearDomEvent()),null!=f&&m.putFlexdata("load_stepid",f),null==b.targetNum&&(b.targetNum=0);var r=j+":"+b.targetNum,s=utillities.fragmentMap[r];if(h||null==s||s.step!=f){var t=null;if(null==s||"View Page"!=k){t=(new AnalyticsUtility).generateUniqueId();var s={};s.fragmentId=t,s.step=f,utillities.fragmentMap[r]=s}return null==t&&(t=s.fragmentId),3==f&&(utillities.fragmentMap[r]=null),h||(m.putFlexdata("load_correlationid",t),m.putFlexdata("load_maxstep",g)),m}},utillities.processArrayAttributes=function(pEvent,arrays){for(var x=0;x<arrays.length;x++)for(var array=arrays[x],y=0;y<array.length;y++){var attr=array[y],level=attr.level,value=null;try{value=eval(attr.target.value)}catch(e){try{value=eval("window."+attr.target.value)}catch(a){}}value&&null!==value||(value=""),("required"===level||"optional"===level&&""!==value)&&("label"===attr.type?(value=decodeURIComponent(value),pEvent.putLabel(attr.name,value.trim())):"location"===attr.type?pEvent.putLocation(attr.name,value):"number"===attr.type?pEvent.putNumber(attr.name,value):"actor"===attr.type?pEvent.putActor(attr.actorName,attr.name,value):"flexdata"===attr.type&&pEvent.putFlexdata(attr.name,value))}},utillities.trim=function(a){return analyticsUtil.isEmpty(a)?"":null!=a.trim?a.trim():a},utillities.safeExtractNumber=function(a,b){if(b=b||void 0,!a)return b;isNaN(a)&&(a=utillities.parseNum(a,!0));var c=parseFloat((""+a).replace(/[^\d\.]/g,""));return isNaN(c)&&(c=b),c},utillities.findClosestMatch=function(a,b,c){var d=b;if(a&&b)for(;a.parentElement!=d;){var e=utillities.isInTree(d,c);if(e)return e;if(d=d.parentElement,null==d)return null}return null},utillities.isInTree=function(a,b){if(window.pointillist.Sizzle.matchesSelector(a,b))return a;for(var c=0;c<a.childNodes.length;c++)if(1==a.childNodes[c].nodeType){var d=utillities.isInTree(a.childNodes[c],b);if(d)return d}return null},utillities.processCustomAttributes=function(event,pEvent,eventDefinition,controller,isForPreview){if(eventDefinition&&eventDefinition.getCustomAttributes())for(var n=0;n<eventDefinition.getCustomAttributes().length;n++){var errValuePrefix="<span class='pntlst-err-value'>",errValueSuffix="</span>",attrDef=eventDefinition.getCustomAttributes()[n],value=null,target=null;if(event&&(target=event.target),"dom-element"===attrDef.target.source.type){var attrNode=controller.resolveAttributeNode?controller.resolveAttributeNode(attrDef,target,eventDefinition):null;null!=attrNode&&(attrNode.nodeName&&"SELECT"===attrNode.nodeName.toUpperCase()?value=attrNode.options[attrNode.selectedIndex].text:null!=attrNode.value&&""!=attrNode.value?value=attrNode.value:null!=attrNode.text&&""!=attrNode.text?value=attrNode.text:null!=attrNode.innerText&&""!=attrNode.innerText?value=attrNode.innerText:null!=attrNode.href&&""!=attrNode.href?value=attrNode.href:null!=attrNode.src&&""!=attrNode.src&&(value=attrNode.src))}else if("script"===attrDef.target.source.type)try{var isMainEvent=attrDef.target.value&&attrDef.target.value.indexOf("fireEvent")!==-1;isMainEvent&&(window.pointillist.mainEventTime=pEvent.eventTime),value=eval(attrDef.target.value),"object"==typeof value&&(value=value.value||value.innerText),isMainEvent&&(window.pointillist.mainEventTime="")}catch(a){isForPreview&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='"+(a.message?a.message:a)+"'>"),value=""}if(null==value||""===value)if(isForPreview)errValuePrefix.indexOf("ptl-error=")==-1&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='No Value'>");else if("filter"!==attrDef.type)continue;switch(attrDef.type){case"number":var number=utillities.safeExtractNumber(value);null!=number?pEvent.putNumber(attrDef.name,number):isForPreview&&(errValuePrefix.indexOf("ptl-error=")==-1&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='Not parsable as a number'>"),pEvent.putNumber(errValuePrefix+attrDef.name+errValueSuffix,errValuePrefix+value+errValueSuffix));break;case"label":isForPreview&&analyticsUtil.isEmpty(value)?(errValuePrefix.indexOf("ptl-error=")==-1&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='No Value'>"),pEvent.putLabel(errValuePrefix+attrDef.name+errValueSuffix,utillities.trim(value))):pEvent.putLabel(attrDef.name,utillities.trim(value));break;case"ip":isForPreview&&analyticsUtil.isEmpty(value)?pEvent.putLabel(errValuePrefix+attrDef.name+errValueSuffix,utillities.trim(value)):pEvent.putLabel(attrDef.name,utillities.trim(value));break;case"geo":var regPostalCode=new RegExp("^\\d{5}(?:[-\\s]\\d{4})?$"),bool=regPostalCode.test(value);bool?pEvent.putLocation(attrDef.name,value):isForPreview&&pEvent.putLocation(errValuePrefix+attrDef.name+errValueSuffix,errValuePrefix+value+errValueSuffix);break;case"date":var date=new XDate(value);if(date.valid()){var str=date.toString("yyyy-MM-dd HH:mm:sszzz"),lastColonIndex=str.lastIndexOf(":"),first=str.substring(0,lastColonIndex),end=str.substring(lastColonIndex+1,str.length);str=first+end,pEvent.putDate(attrDef.name,str);break}isForPreview&&(errValuePrefix.indexOf("ptl-error=")==-1&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='Not parsable as a date'>"),pEvent.putDate(errValuePrefix+attrDef.name+errValueSuffix,errValuePrefix+value+errValueSuffix));case"actor":var actorNames=[];if(attrDef.actorSource&&utillities.PTL_ACTOR_SOURCE.GLOBAL.toLowerCase()===attrDef.actorSource.toLowerCase()?actorNames=window.pointillist.actorIdsMapping&&attrDef.name&&window.pointillist.actorIdsMapping[attrDef.name.toUpperCase()]?window.pointillist.actorIdsMapping[attrDef.name.toUpperCase()]:[window.pointillist.primaryActor]:attrDef.actorNames&&attrDef.actorNames.length>0?actorNames=attrDef.actorNames:attrDef.actorName&&(actorNames=[attrDef.actorName]),isForPreview&&analyticsUtil.isEmpty(value)){errValuePrefix.indexOf("ptl-error=")==-1&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='No Value'>");for(var i=0;i<actorNames.length;i++)actorNames[i]&&pEvent.putActor(actorNames[i],errValuePrefix+attrDef.name+errValueSuffix,value,!0)}else for(var i=0;i<actorNames.length;i++)actorNames[i]&&pEvent.putActor(actorNames[i],attrDef.name,value);break;case"flexdata":isForPreview&&analyticsUtil.isEmpty(value)?(errValuePrefix.indexOf("ptl-error=")==-1&&(errValuePrefix="<span class='pntlst-err-value' ptl-error='No Value'>"),pEvent.putFlexdata(errValuePrefix+attrDef.name+errValueSuffix,value)):pEvent.putFlexdata(attrDef.name,value);break;case"filter":if(!value)return void(pEvent.doNotStream=!0)}}},utillities.clearOutlines=function(){for(var a=0;a<utillities.markedObjects.length;a++){var b=utillities.markedObjects[a];null!=b.style&&(b.style.outline="")}utillities.markedObjects=[]},utillities.markElementAsEvent=function(a){null!=a.style&&(a.style.old_outline=a.style.outline,a.style.outline=utillities.getSelectedStyle(),utillities.markedObjects.push(a))},utillities.unmarkElementAsEvent=function(a){if(null!=a.style){a.style.old_outline?a.style.outline=a.style.old_outline:a.style.outline="";for(var b=0;b<utillities.markedObjects.length;b++)if(utillities.markedObjects[b]==a){utillities.markedObjects.splice(b,1);break}}},utillities.markSelectorAsEvent=function(a){var b=window.pointillist.Sizzle(a);if(0!=b.length){b.length>1;for(var c=0;c<b.length;c++)utillities.markElementAsEvent(b[c])}},utillities.markChildPattern=function(a,b){var c=window.pointillist.Sizzle(a);if(0!=c.length){c.length>1;for(var d=0;d<c.length;d++)utillities.markElementAsParentEvent(c[d]);var e=window.pointillist.Sizzle(b);if(0!=e.length)for(var d=0;d<e.length;d++)utillities.markElementAsChildEvent(e[d])}},utillities.markParentRecursive=function(a){var b=window.pointillist.Sizzle(a);if(0!=b.length){b.length>1;for(var c=0;c<b.length;c++)utillities.markElementAsParentEvent(b[c]),utillities.markChildren(b[c])}},utillities.unmarkParentRecursive=function(a){var b=window.pointillist.Sizzle(a);if(0!=b.length){b.length>1;for(var c=0;c<b.length;c++)utillities.unmarkElementAsParentEvent(b[c]),utillities.unmarkChildren(b[c])}},utillities.resolveSelector=function(a){return window.pointillist.Sizzle(a)},utillities.resolveSelectorInElement=function(a,b){return window.pointillist.Sizzle(a,b)},utillities.getValue=function(a){var b=window.pointillist.Sizzle(a);if(b&&b.length>0){var c=b[0],d="";return c.nodeName&&"SELECT"===c.nodeName.toUpperCase()?d=c.options[c.selectedIndex].text:null!=c.value&&""!=c.value?d=c.value:null!=c.text&&""!=c.text?d=c.text:null!=c.innerText&&""!=c.innerText?d=c.innerText:null!=c.alt&&""!=c.alt?d=c.alt:null!=c.href&&""!=c.href?d=c.href:null!=c.src&&""!=c.src&&(d=c.src),d}},utillities.generateSelector=function(a,b,c){if(null==a)return"";if("html"==a.tagName)return a.tagName;if("BODY"==a.tagName)return a.tagName;var d=!1,e=!1;1!=c&&2!=c||(e=!0),3==b&&(d=!0);var f=" > "+utillities.getElementSelectorString(a,d,e);return 2==b&&f.indexOf(".")!=-1&&(b=3),2==c&&f.indexOf(":nth-of-type(")!=-1&&(c=3),utillities.generateSelector(a.parentElement,b,c)+f},utillities.findPath=function(a,b,c){if(null==a)return"";if("html"==a.tagName)return a.tagName;if("BODY"==a.tagName)return a.tagName;var d=" > "+analyticsUtil.getElementSelectorString(a,b,c);return d.indexOf(".")!=-1&&(b=!0),utillities.findPath(a.parentElement,b,c)+d},utillities.findPathFromParent=function(a,b,c,d){if(null==b)return"";if("html"==b.tagName)return b.tagName;if("BODY"==b.tagName)return b.tagName;if(a==b.parentElement)return utillities.getElementSelectorString(b,c,d);var e=" > "+utillities.getElementSelectorString(b,c,d);return e.indexOf(".")!=-1&&(c=!0),utillities.findPathFromParent(a,b.parentElement,c,d)+e},utillities.countTags=function(a,b){for(var c=0,d=0;d<a.childNodes.length;d++)a.childNodes[d].tagName==b&&c++;return c},utillities.findTagOrdinal=function(a,b){for(var c=0,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b.tagName&&c++,a.childNodes[d]==b)return c;return-1},utillities.getElementSelectorString=function(a,b,c){var d=a.tagName,e=a.parentElement,f=d;if(c&&utillities.countTags(e,d)>1&&(f+=":nth-of-type("+utillities.findTagOrdinal(e,a)+")"),b)return f;for(var g=a.className,h=g.split(" "),i=0;i<h.length;i++)""!=h[i]&&"hover"!=h[i]&&(f+="."+h[i]);return f},utillities.markElementAsParentEvent=function(a){null!=a.style&&(a.style.outline=utillities.getParentStyle(),utillities.markedObjects.push(a))},utillities.unmarkElementAsParentEvent=function(a){if(null!=a.style){a.style.outline="";for(var b=0;b<utillities.markedObjects.length;b++)if(utillities.markedObjects[b]==a){utillities.markedObjects.splice(b,1);break}}},utillities.markElementAsChildEvent=function(a){null!=a.style&&(a.style.outline=utillities.getChildStyle(),utillities.markedObjects.push(a))},utillities.unmarkElementAsChildEvent=function(a){if(null!=a.style){a.style.outline="";for(var b=0;b<utillities.markedObjects.length;b++)if(utillities.markedObjects[b]==a){utillities.markedObjects.splice(b,1);break}}},utillities.markChildren=function(a){if(null!=a&&null!=a.childNodes)for(var b=0;b<a.childNodes.length;b++)utillities.markElementAsChildEvent(a.childNodes[b]),utillities.markChildren(a.childNodes[b])},utillities.unmarkChildren=function(a){if(null!=a&&null!=a.childNodes)for(var b=0;b<a.childNodes.length;b++)utillities.unmarkElementAsChildEvent(a.childNodes[b]),utillities.unmarkChildren(a.childNodes[b])},utillities.isPointilistChild=function(a){var b=null;if(null==a&&(b=!1),null==b){var c=null;null!=a.getAttribute&&(c=a.getAttribute("pointillistElement")),b=null!=c||utillities.isPointilistChild(a.parentNode)}return b},utillities.getImediateFormElement=function(a){for(;a&&a!==document&&["HTML","BODY"].indexOf(a.tagName)===-1;){if("FORM"===a.tagName)return a;a=a.parentNode?a.parentNode:""}},utillities.isAnyOneUrlMatched=function(a){if(!(a.targets&&a.targets.length>0)){var b=a.targetValue;return b.indexOf("?")!=-1&&(b=b.substring(0,b.indexOf("?"))),utillities.isURLMatched(b,a.matchType)}for(var c=0;c<a.targets.length;c++)if(a.targets[c]){var b=a.targets[c].targetValue;b.indexOf("?")!=-1&&(b=b.substring(0,b.indexOf("?")));var d=utillities.isURLMatched(b,a.targets[c].matchType);if(d)return!0}return!1},utillities.isURLMatched=function(a,b){if("regexp"===b)return analyticsUtil.isRegExpMatches(window.location.href,a)||analyticsUtil.isRegExpMatches(window.location.href.replace(/(^https?:\/\/)?(www\.)?/,""),a.replace(/(^https?:\/\/)?(www\.)?/,""));a&&"^"==a.slice(-1)&&(a=a.slice(0,-1)+"*");var c=pointillist.getUriParser(),d=pointillist.getUriParser(a);if(c.path=c.path.replace(/^\/|\/$/g,""),d.path=d.path.replace(/^\/|\/$/g,""),analyticsUtil.isWildCardMatches(window.location.href.replace(/(^https?:\/\/)?(www\.)?/,""),a.replace(/(^https?:\/\/)?(www\.)?/,"")))return!0;var e=c.host,f=d.host;if(e=e.replace(/^www\./,""),f=f.replace(/^www\./,""),e===f&&analyticsUtil.isWildCardMatches(c.path,d.path)&&analyticsUtil.isWildCardMatches(c.anchor,d.anchor)){for(var g in d.queryKey)if(g&&"*"!==g.trim()){var h=[];if(g.indexOf("*")>-1){if(Object.keys(c.queryKey).forEach(function(a){analyticsUtil.isWildCardMatches(a,g)&&h.push(a)}),0===h.length)return!1}else h=[g];for(var i=!1,j=0;j<h.length;j++)c.queryKey[h[j]]&&analyticsUtil.isWildCardMatches(c.queryKey[h[j]],d.queryKey[g])&&(i=!0);if(!i)return!1}return!0}return!1},utillities.isFilterMatched=function(a,b){var c=!0;switch(a.source.name){case"Domain":var d=pointillist.getUriParser().host,e=a.value;d=d.replace(/^www\./,""),e=e.replace(/^www\./,""),c=analyticsUtil.applyFilter(d,e,a.op);break;case"Path":var f=pointillist.getUriParser().path;f=f?f.replace(/^\/|\/$/g,""):"",a.value=a.value?a.value.replace(/^\/|\/$/g,""):"",a.value=a.value?a.value.replace(/^\*\//g,"*"):"",c=analyticsUtil.applyFilter(f,a.value,a.op);break;case"Query":c=analyticsUtil.applyFilter(pointillist.getUriParser().query,a.value,a.op);break;case"Hash":var g=pointillist.getUriParser().anchor;g=g?g.replace(/^\/|\/$/g,""):"",a.value=a.value?a.value.replace(/^\/|\/$/g,""):"",a.value=a.value?a.value.replace(/^\*\//g,"*"):"",c=analyticsUtil.applyFilter(g,a.value,a.op);break;case"Title":c=analyticsUtil.applyFilter(document.title,a.value,a.op);break;case"Referring URL":c=analyticsUtil.applyFilter(document.referrer||"",a.value,a.op);break;case"Traffic Source":c=analyticsUtil.applyFilter(pointillist.getTrafficSource(),a.value,a.op);break;case"UTM Source":c=analyticsUtil.applyFilter(analyticsUtil.getUTM_Source(),a.value,a.op);break;case"UTM Medium":c=analyticsUtil.applyFilter(analyticsUtil.getUTM_Medium(),a.value,a.op);break;case"UTM Term":c=analyticsUtil.applyFilter(analyticsUtil.getUTM_Term(),a.value,a.op);break;case"UTM Content":c=analyticsUtil.applyFilter(analyticsUtil.getUTM_Content(),a.value,a.op);break;case"UTM Campaign":c=analyticsUtil.applyFilter(analyticsUtil.getUTM_Campaign(),a.value,a.op);break;case"Landing Page URL":c=analyticsUtil.applyFilter(pointillist.getLandingPageURL(),a.value,a.op);break;case"User Agent":c=analyticsUtil.applyFilter(pointillist.getUAParser().getUA(),a.value,a.op);break;case"Browser Type":c=analyticsUtil.applyFilter(pointillist.getUAParser().getBrowser().name,a.value,a.op);break;case"Device Type":c=analyticsUtil.applyFilter(pointillist.getUAParser().getDevice().type||"desktop",a.value,a.op);break;case"OS Name":c=analyticsUtil.applyFilter(pointillist.getUAParser().getOS().name,a.value,a.op);break;case"Href":c=analyticsUtil.applyFilter(b&&"a"===b.tagName.toLowerCase()?b.href:"",a.value,a.op);break;case"Target Tag":c=analyticsUtil.applyFilter(b?b.tagName:"",a.value,a.op);break;case"Target ID":c=analyticsUtil.applyFilter(b?b.id:"",a.value,a.op);break;case"Target Class":c=analyticsUtil.applyFilter(b?b.className:"",a.value,a.op);break;case"Target Text":c=analyticsUtil.applyFilter(b?b.text:"",a.value,a.op);break;case"Value":c=analyticsUtil.applyFilter(b?b.value:"",a.value,a.op);break;case"Text":c=analyticsUtil.applyFilter(b?b.text:"",a.value,a.op);break;case"InnerText":c=analyticsUtil.applyFilter(b?b.innerText:"",a.value,a.op);break;case"Src":var h=b&&b.src?decodeURIComponent(b.src):"",i=a.value;if(a.value&&!pointillist.getUriParser(a.value).host){var j=pointillist.getUriParser();i=j.protocol+"://"+j.host+a.value}c=analyticsUtil.applyFilter(h,i,a.op)}return c},utillities.createElementsFromText=function(a,b){if(!a)return[];var c=document.createElement("div");a=utillities.replaceAllImageUrls(a,b),c.innerHTML=a;for(var d=[],e=0;e<c.children.length;e++)d.push(c.children[e]);return d},utillities.replaceAllImageUrls=function(a,b){return a=utillities.replaceImageUrl(a,"<domPickerImgUrl/>","/analytics/icon-dom-picker.png",b),a=utillities.replaceImageUrl(a,"<upArrowImgUrl/>","/analytics/icon-arrow-up.png",b),a=utillities.replaceImageUrl(a,"<downArrowImgUrl/>","/analytics/icon-arrow-down.png",b),a=utillities.replaceImageUrl(a,"<iconEdit/>","/analytics/icon-edit.png",b),a=utillities.replaceImageUrl(a,"<iconDelete/>","/analytics/icon-delete.png",b),a=utillities.replaceImageUrl(a,"<iconAddSquare/>","/analytics/icon-add-square.svg",b)},utillities.replaceImageUrl=function(a,b,c,d){return d||(d=""),a.replace(new RegExp(b,"g"),'"'+d+c+'"')},utillities.getChildStyle=function(){return"green solid thick"},utillities.getParentStyle=function(){return"purple solid thick"},utillities.getSelectedStyle=function(){return"red solid thick"},utillities.getErrorStyle=function(){return"red dashed"},utillities.getSelectedEventStyle=function(){return"blue solid thick"},utillities.addHiddenClass=function(a){return a+" pntlst-is-hidden"},utillities.removeHiddenClass=function(a){return a.replace(new RegExp("pntlst-is-hidden","g"),"")},utillities.sortArrOfObjectsByProperty=function(a,b){return a.sort(function(a,c){var d=a[b].toUpperCase(),e=c[b].toUpperCase();return d<e?-1:d>e?1:0})},utillities.setDefaultAttributes=function(a,b){var c=[],d={view:"View Page",click:"Click on",change:"Change on"};return a&&"object"==typeof a?b?(b=b?b.toLowerCase():b,d[b]?(a.putLabel("ActionType",d[b]),a.putLabel("Channel","Web"),c[0]=EVENT_ATTRIBUTES.CommonEventAttributes,"click"===b?c[1]=EVENT_ATTRIBUTES.ClickEventAttributes:"change"===b&&(c[1]=EVENT_ATTRIBUTES.ChangeEventAttributes),void utillities.processArrayAttributes(a,c)):"Not an valid action type. Valid action type is view or click or change"):"actionType is missing.":"event object is missing."},utillities.fireEvent=function(a,b,c){var d=pointillist.streamer||new StreamListener(!1),e=!1;"undefined"!=typeof EventEditorController&&(e=!0);var f=this.getEventDefinitionByName(a,d);if(!f)return"0";if(b&&b.length>0){var g=[];g[0]=EVENT_ATTRIBUTES.CommonEventAttributes;var h=window._ptlt.getDomEvent();h&&("click"==h.type?g[1]=EVENT_ATTRIBUTES.ClickEventAttributes:"change"==h.type?g[1]=EVENT_ATTRIBUTES.ChangeEventAttributes:"submit"==h.type&&(g[1]=EVENT_ATTRIBUTES.SubmitEventAttributes)),c?window._ptlt.setAdditionalAttrData(c):window._ptlt.setAdditionalAttrData({});for(var i=0;i<b.length;i++){if(window._ptlt.setAttrData(b[i]),e){this.prepareEventForStreaming(h,f.targets[0],[],{},e,d.currentStep,d.currentStep,e,window.pointillist.mainEventTime)}else d.handleEvent(h,f.targets,g,d.currentStep,d.currentStep,window.pointillist.mainEventTime);window._ptlt.clearAttrData()}window._ptlt.clearAdditionalAttrData()}return b.length},utillities.getEventDefinitionByName=function(a,b){var c=b.persister.getPageDTOs(),d=b.persister.getClickDTOs(),e="";if(c&&c.length>0)for(var f=0;f<c.length;f++)if(c[f]&&c[f].name===a){e=c[f];break}if(!e&&d)for(var g in d)if(d.hasOwnProperty(g)){var h=d[g];if(h&&h.length>0)if(1===h.length)h[0]&&h[0].name===a&&(e=h[0]);else for(var i=0;i<h.length;i++)if(h[i]&&h[i].name===a){e=h[i];break}if(e)break}return e},utillities}var VERSION_NUMBER="1.0.0",SESSION_ID_TIMEOUT_SECONDS=1800,LOGGING=!1,requestMethod="GET",API_TOKEN,API_DOMAIN,EVENT_ATTRIBUTES={},TENANT_DATA,COMMON_BASELINE_ATTRIBUTES={};Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var a=this.length-1;a>=0;a--)this[a]&&this[a].parentElement&&this[a].parentElement.removeChild(this[a])},EVENT_ATTRIBUTES.CommonEventAttributes=[{name:"Domain",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUriParser().host}"}},{name:"Path",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUriParser().path}"}},{name:"Hash",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUriParser().anchor}"}},{name:"UTM Source",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: analyticsUtil.getUTM_Source()}"}},{name:"UTM Medium",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: analyticsUtil.getUTM_Medium()}"}},{name:"UTM Term",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: analyticsUtil.getUTM_Term()}"}},{name:"UTM Content",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: analyticsUtil.getUTM_Content()}"}},{name:"UTM Campaign",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: analyticsUtil.getUTM_Campaign()}"}},{name:"User Agent",type:"flexdata",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUAParser().getUA()}"}},{name:"Browser Type",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUAParser().getBrowser().name}"}},{name:"Device Type",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUAParser().getDevice().type || 'desktop'}"}},{name:"OS Name",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getUAParser().getOS().name}"}},{name:"Referring URL Domain",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getReferringDomain(document.referrer)}"}},{name:"Traffic Source Domain",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.getReferringDomain(pointillist.getTrafficSource())}"}},{name:"nc",type:"flexdata",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: navigator.cookieEnabled ? '1' : '0'}"}},{name:"dc",type:"flexdata",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: document.cookie && document.cookie.length > 0 ? '1' : '0'}"}}],EVENT_ATTRIBUTES.CommonFilterAttributes=[{name:"Domain",type:"label"},{name:"Path",type:"label"},{name:"Query",type:"label"},{name:"Hash",type:"label"},{name:"Title",type:"label"},{name:"Referring URL",type:"label"},{name:"Traffic Source",type:"label"},{name:"UTM Source",type:"label"},{name:"UTM Medium",type:"label"},{name:"UTM Term",type:"label"},{name:"UTM Content",type:"label"},{name:"UTM Campaign",type:"label"},{name:"Landing Page URL",type:"label"},{name:"User Agent",type:"flexdata"},{name:"Browser Type",type:"label"},{name:"Device Type",type:"label"},{name:"OS Name",type:"label"},{name:"Referring URL Domain",type:"label"},{name:"Traffic Source Domain",type:"label"}],EVENT_ATTRIBUTES.ClickEventAttributes=[{name:"Href",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: (pointillist.runtime.currentTargetElement && pointillist.runtime.currentTargetElement.tagName.toLowerCase() === 'a' ? pointillist.runtime.currentTargetElement.href : null)}"}},{name:"Target Tag",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.tagName : null}"}},{name:"Target ID",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.id : null}"}},{name:"Target Class",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.className : null}"}},{name:"Target Text",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.text : null}"}}],EVENT_ATTRIBUTES.ChangeEventAttributes=[{name:"Href",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: (pointillist.runtime.currentTargetElement && pointillist.runtime.currentTargetElement.tagName.toLowerCase() === 'a' ? pointillist.runtime.currentTargetElement.href : null)}"}},{name:"Target Tag",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.tagName : null}"}},{name:"Target ID",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.id : null}"}},{name:"Target Class",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.className : null}"}},{name:"Target Text",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.text : null}"}}],EVENT_ATTRIBUTES.SubmitEventAttributes=[{name:"Href",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: (pointillist.runtime.currentTargetElement && pointillist.runtime.currentTargetElement.tagName.toLowerCase() === 'a' ? pointillist.runtime.currentTargetElement.href : null)}"}},{name:"Target Tag",type:"label",level:"required",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.tagName : null}"}},{name:"Target ID",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.id : null}"}},{name:"Target Class",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.className : null}"}},{name:"Target Text",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.text : null}"}}],EVENT_ATTRIBUTES.AdditionalEventFilters=[{name:"Value",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: (pointillist && pointillist.runtime && pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.value : null)}"}},{name:"InnerText",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist && pointillist.runtime && pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.innerText : null}"}},{name:"Src",type:"label",level:"optional",target:{source:{type:"custom",name:"script"},op:"execute",value:"{value: pointillist && pointillist.runtime && pointillist.runtime.currentTargetElement ? pointillist.runtime.currentTargetElement.src : null}"}}],parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var UAParser=function(a){var b="0.7.10",c="",d="?",e="function",f="undefined",g="object",h="string",i="major",j="model",k="name",l="type",m="vendor",n="version",o="architecture",p="console",q="mobile",r="tablet",s="smarttv",t="wearable",u="embedded",v={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2===0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&b.toLowerCase().indexOf(a.toLowerCase())!==-1},lowerize:function(a){return a.toLowerCase()},major:function(a){return typeof a===h?a.split(".")[0]:void 0}},w={rgx:function(){for(var a,b,c,d,h,i,j,k=0,l=arguments;k<l.length&&!i;){var m=l[k],n=l[k+1];if(typeof a===f){a={};for(d in n)n.hasOwnProperty(d)&&(h=n[d],typeof h===g?a[h[0]]=void 0:a[h]=void 0)}for(b=c=0;b<m.length&&!i;)if(i=m[b++].exec(this.getUA()))for(d=0;d<n.length;d++)j=i[++c],h=n[d],typeof h===g&&h.length>0?2==h.length?typeof h[1]==e?a[h[0]]=h[1].call(this,j):a[h[0]]=h[1]:3==h.length?typeof h[1]!==e||h[1].exec&&h[1].test?a[h[0]]=j?j.replace(h[1],h[2]):void 0:a[h[0]]=j?h[1].call(this,j,h[2]):void 0:4==h.length&&(a[h[0]]=j?h[3].call(this,j.replace(h[1],h[2])):void 0):a[h]=j?j:void 0;k+=2}return a},str:function(a,b){for(var c in b)if(typeof b[c]===g&&b[c].length>0){for(var e=0;e<b[c].length;e++)if(v.has(b[c][e],a))return c===d?void 0:c}else if(v.has(b[c],a))return c===d?void 0:c;return a}},x={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[k,n],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[k,"Opera Mini"],n],[/\s(opr)\/([\w\.]+)/i],[[k,"Opera"],n],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[k,n],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[k,"IE"],n],[/(edge)\/((\d+)?[\w\.]+)/i],[k,n],[/(yabrowser)\/([\w\.]+)/i],[[k,"Yandex"],n],[/(comodo_dragon)\/([\w\.]+)/i],[[k,/_/g," "],n],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[k,n],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[k,"UCBrowser"],n],[/(dolfin)\/([\w\.]+)/i],[[k,"Dolphin"],n],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[k,"Chrome"],n],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[n,[k,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[n,[k,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[n,[k,"Facebook"]],[/fxios\/([\w\.-]+)/i],[n,[k,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[n,[k,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[n,k],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[k,[n,w.str,x.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[k,n],[/(navigator|netscape)\/([\w\.-]+)/i],[[k,"Netscape"],n],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[k,n]],
cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[o,"amd64"]],[/(ia32(?=;))/i],[[o,v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[o,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[o,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[o,/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[[o,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[o,v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[j,m,[l,r]],[/applecoremedia\/[\w\.]+ \((ipad)/],[j,[m,"Apple"],[l,r]],[/(apple\s{0,1}tv)/i],[[j,"Apple TV"],[m,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,j,[l,r]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[j,[m,"Amazon"],[l,r]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[j,w.str,x.device.amazon.model],[m,"Amazon"],[l,q]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[j,m,[l,q]],[/\((ip[honed|\s\w*]+);/i],[j,[m,"Apple"],[l,q]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,j,[l,q]],[/\(bb10;\s(\w+)/i],[j,[m,"BlackBerry"],[l,q]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[j,[m,"Asus"],[l,r]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[m,"Sony"],[j,"Xperia Tablet"],[l,r]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[m,"Sony"],[j,"Xperia Phone"],[l,q]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[m,j,[l,p]],[/android.+;\s(shield)\sbuild/i],[j,[m,"Nvidia"],[l,p]],[/(playstation\s[34portablevi]+)/i],[j,[m,"Sony"],[l,p]],[/(sprint\s(\w+))/i],[[m,w.str,x.device.sprint.vendor],[j,w.str,x.device.sprint.model],[l,q]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[m,j,[l,r]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[j,/_/g," "],[l,q]],[/(nexus\s9)/i],[j,[m,"HTC"],[l,r]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[j,[m,"Microsoft"],[l,p]],[/(kin\.[onetw]{3})/i],[[j,/\./g," "],[m,"Microsoft"],[l,q]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[j,[m,"Motorola"],[l,q]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[j,[m,"Motorola"],[l,r]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[m,"Samsung"],j,[l,r]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],j,[l,q]],[/(samsung);smarttv/i],[m,j,[l,s]],[/\(dtv[\);].+(aquos)/i],[j,[m,"Sharp"],[l,s]],[/sie-(\w+)*/i],[j,[m,"Siemens"],[l,q]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],j,[l,q]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[j,[m,"Acer"],[l,r]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],j,[l,r]],[/(lg) netcast\.tv/i],[m,j,[l,s]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[j,[m,"LG"],[l,q]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[j,[m,"Lenovo"],[l,r]],[/linux;.+((jolla));/i],[m,j,[l,q]],[/((pebble))app\/[\d\.]+\s/i],[m,j,[l,t]],[/android.+;\s(glass)\s\d/i],[j,[m,"Google"],[l,t]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[j,/_/g," "],[m,"Xiaomi"],[l,q]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[l,v.lowerize],m,j]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[n,[k,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[k,n],[/rv\:([\w\.]+).*(gecko)/i],[n,k]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[k,n],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[k,[n,w.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[k,"Windows"],[n,w.str,x.os.windows.version]],[/\((bb)(10);/i],[[k,"BlackBerry"],n],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[k,n],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[k,"Symbian"],n],[/\((series40);/i],[k],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[k,"Firefox OS"],n],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[k,n],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[k,"Chromium OS"],n],[/(sunos)\s?([\w\.]+\d)*/i],[[k,"Solaris"],n],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[k,n],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[k,"iOS"],[n,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[k,"Mac OS"],[n,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[k,n]]},z=function(b,d){if(!(this instanceof z))return new z(b,d).getResult();var e=b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:c),f=d?v.extend(y,d):y;return this.getBrowser=function(){var a=w.rgx.apply(this,f.browser);return a.major=v.major(a.version),a},this.getCPU=function(){return w.rgx.apply(this,f.cpu)},this.getDevice=function(){return w.rgx.apply(this,f.device)},this.getEngine=function(){return w.rgx.apply(this,f.engine)},this.getOS=function(){return w.rgx.apply(this,f.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(a){return e=a,this},this};return z.VERSION=b,z.BROWSER={NAME:k,MAJOR:i,VERSION:n},z.CPU={ARCHITECTURE:o},z.DEVICE={MODEL:j,VENDOR:m,TYPE:l,CONSOLE:p,MOBILE:q,SMARTTV:s,TABLET:r,WEARABLE:t,EMBEDDED:u},z.ENGINE={NAME:k,VERSION:n},z.OS={NAME:k,VERSION:n},new z},XDate=function(a,b,c,d){function e(){var b,c=this instanceof e?this:new e,d=arguments,h=d.length;if("boolean"==typeof d[h-1]&&(b=d[--h],d=z(d,0,h)),h)if(1==h){if(h=d[0],h instanceof a||"number"==typeof h)c[0]=new a(+h);else if(h instanceof e){var d=c,i=new a(+h[0]);f(h)&&(i.toString=H),d[0]=i}else if("string"==typeof h){c[0]=new a(0);a:{for(var j,d=h,h=b||!1,i=e.parsers,k=0;k<i.length;k++)if(j=i[k](d,h,c)){c=j;break a}c[0]=new a(d)}}}else c[0]=new a(G.apply(a,d)),b||(c[0]=v(c[0]));else c[0]=new a;return"boolean"==typeof b&&g(c,b),c}function f(a){return a[0].toString===H}function g(b,c,d){return c?f(b)||(d&&(b[0]=new a(G(b[0].getFullYear(),b[0].getMonth(),b[0].getDate(),b[0].getHours(),b[0].getMinutes(),b[0].getSeconds(),b[0].getMilliseconds()))),b[0].toString=H):f(b)&&(b[0]=d?v(b[0]):new a(+b[0])),b}function h(a,b,c,d,e){var f=y(t,a[0],e),a=y(u,a[0],e),e=!1;2==d.length&&"boolean"==typeof d[1]&&(e=d[1],d=[c]),c=1==b?(c%12+12)%12:f(1),a(b,d),e&&f(1)!=c&&(a(1,[f(1)-1]),a(2,[w(f(0),f(1))]))}function i(a,c,d,e){var d=Number(d),f=b.floor(d);a["set"+C[c]](a["get"+C[c]]()+f,e||!1),f!=d&&c<6&&i(a,c+1,(d-f)*E[c],e)}function j(a,c,d){var a=a.clone().setUTCMode(!0,!0),c=e(c).setUTCMode(!0,!0),f=0;if(0==d||1==d){for(var g=6;g>=d;g--)f/=E[g],f+=t(c,!1,g)-t(a,!1,g);1==d&&(f+=12*(c.getFullYear()-a.getFullYear()))}else 2==d?(d=a.toDate().setUTCHours(0,0,0,0),f=c.toDate().setUTCHours(0,0,0,0),f=b.round((f-d)/864e5)+(c-f-(a-d))/864e5):f=(c-a)/[36e5,6e4,1e3,1][d-3];return f}function k(c){var d=c(0),e=c(1),f=c(2),c=new a(G(d,e,f)),d=m(l(d,e,f));return b.floor(b.round((c-d)/864e5)/7)+1}function l(b,c,d){return c=new a(G(b,c,d)),c<m(b)?b-1:c>=m(b+1)?b+1:b}function m(b){return b=new a(G(b,0,4)),b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+6)%7),b}function n(a,b,c,e){var f=y(t,a,e),g=y(u,a,e);c===d&&(c=l(f(0),f(1),f(2))),c=m(c),e||(c=v(c)),a.setTime(+c),g(2,[f(2)+7*(b-1)])}function o(a,b,c,d,f){var g=e.locales,h=g[e.defaultLocale]||{},i=y(t,a,f),c=("string"==typeof c?g[c]:c)||{};return p(a,b,function(a){if(d)for(var b=(7==a?2:a)-1;b>=0;b--)d.push(i(b));return i(a)},function(a){return c[a]||h[a]},f)}function p(a,b,c,e,f){for(var g,h,i="";g=b.match(F);){if(i+=b.substr(0,g.index),g[1]){h=i;for(var i=a,j=g[1],k=c,l=e,m=f,n=j.length,o=void 0,r="";n>0;)o=q(i,j.substr(0,n),k,l,m),o!==d?(r+=o,j=j.substr(n),n=j.length):n--;i=h+(r+j)}else g[3]?(h=p(a,g[4],c,e,f),parseInt(h.replace(/\D/g,""),10)&&(i+=h)):i+=g[7]||"'";b=b.substr(g.index+g[0].length)}return i+b}function q(a,c,d,f,g){var h=e.formatters[c];if("string"==typeof h)return p(a,h,d,f,g);if("function"==typeof h)return h(a,g||!1,f);switch(c){case"fff":return B(d(6),3);case"s":return d(5);case"ss":return B(d(5));case"m":return d(4);case"mm":return B(d(4));case"h":return d(3)%12||12;case"hh":return B(d(3)%12||12);case"H":return d(3);case"HH":return B(d(3));case"d":return d(2);case"dd":return B(d(2));case"ddd":return f("dayNamesShort")[d(7)]||"";case"dddd":return f("dayNames")[d(7)]||"";case"M":return d(1)+1;case"MM":return B(d(1)+1);case"MMM":return f("monthNamesShort")[d(1)]||"";case"MMMM":return f("monthNames")[d(1)]||"";case"yy":return(d(0)+"").substring(2);case"yyyy":return d(0);case"t":return r(d,f).substr(0,1).toLowerCase();case"tt":return r(d,f).toLowerCase();case"T":return r(d,f).substr(0,1);case"TT":return r(d,f);case"z":case"zz":case"zzz":return g?c="Z":(f=a.getTimezoneOffset(),a=f<0?"+":"-",d=b.floor(b.abs(f)/60),f=b.abs(f)%60,g=d,"zz"==c?g=B(d):"zzz"==c&&(g=B(d)+":"+B(f)),c=a+g),c;case"w":return k(d);case"ww":return B(k(d));case"S":return c=d(2),c>10&&c<20?"th":["st","nd","rd"][c%10-1]||"th"}}function r(a,b){return b(a(3)<12?"amDesignator":"pmDesignator")}function s(a){return!isNaN(+a[0])}function t(a,b,c){return a["get"+(b?"UTC":"")+C[c]]()}function u(a,b,c,d){a["set"+(b?"UTC":"")+C[c]].apply(a,d)}function v(b){return new a(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())}function w(b,c){return 32-new a(G(b,c,32)).getUTCDate()}function x(a){return function(){return a.apply(d,[this].concat(z(arguments)))}}function y(a){var b=z(arguments,1);return function(){return a.apply(d,b.concat(z(arguments)))}}function z(a,b,e){return c.prototype.slice.call(a,b||0,e===d?a.length:e)}function A(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function B(a,b){for(b=b||2,a+="";a.length<b;)a="0"+a;return a}var C="FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds,Day,Year".split(","),D=["Years","Months","Days"],E=[12,31,24,60,60,1e3,1],F=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,G=a.UTC,H=a.prototype.toUTCString,I=e.prototype;return I.length=1,I.splice=c.prototype.splice,I.getUTCMode=x(f),I.setUTCMode=x(g),I.getTimezoneOffset=function(){return f(this)?0:this[0].getTimezoneOffset()},A(C,function(a,b){I["get"+a]=function(){return t(this[0],f(this),b)},8!=b&&(I["getUTC"+a]=function(){return t(this[0],!0,b)}),7!=b&&(I["set"+a]=function(a){return h(this,b,a,arguments,f(this)),this},8!=b&&(I["setUTC"+a]=function(a){return h(this,b,a,arguments,!0),this},I["add"+(D[b]||a)]=function(a,c){return i(this,b,a,c),this},I["diff"+(D[b]||a)]=function(a){return j(this,a,b)}))}),I.getWeek=function(){return k(y(t,this,!1))},I.getUTCWeek=function(){return k(y(t,this,!0))},I.setWeek=function(a,b){return n(this,a,b,!1),this},I.setUTCWeek=function(a,b){return n(this,a,b,!0),this},I.addWeeks=function(a){return this.addDays(7*Number(a))},I.diffWeeks=function(a){return j(this,a,2)/7},e.parsers=[function(b,c,d){if(b=b.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var e=new a(G(b[1],b[3]?b[3]-1:0,b[5]||1,b[7]||0,b[8]||0,b[10]||0,b[12]?1e3*Number("0."+b[12]):0));return b[13]?b[14]&&e.setUTCMinutes(e.getUTCMinutes()+("-"==b[15]?1:-1)*(60*Number(b[16])+(b[18]?Number(b[18]):0))):c||(e=v(e)),d.setTime(+e)}}],e.parse=function(a){return+e(""+a)},I.toString=function(a,b,c){return a!==d&&s(this)?o(this,a,b,c,f(this)):this[0].toString()},I.toUTCString=I.toGMTString=function(a,b,c){return a!==d&&s(this)?o(this,a,b,c,!0):this[0].toUTCString()},I.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")},e.defaultLocale="",e.locales={"":{monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),amDesignator:"AM",pmDesignator:"PM"}},e.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"},A("getTime,valueOf,toDateString,toTimeString,toLocaleString,toLocaleDateString,toLocaleTimeString,toJSON".split(","),function(a){I[a]=function(){return this[0][a]()}}),I.setTime=function(a){return this[0].setTime(a),this},I.valid=x(s),I.clone=function(){return new e(this)},I.clearTime=function(){return this.setHours(0,0,0,0)},I.toDate=function(){return new a(+this[0])},e.now=function(){return+new a},e.today=function(){return(new e).clearTime()},e.UTC=G,e.getDaysInMonth=w,e}(Date,Math,Array),PointillistEvent=function(a,b,c,d){var e=new Date,f=1+e.getUTCMonth(),g=e.getUTCFullYear()+"-"+f+"-"+e.getUTCDate()+" "+e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds()+"+0000";if(!a)throw"event type is a mandatory parameter";return API_TOKEN=b,{eventType:a,eventTime:d?d:"View Page"===c&&pointillist.scriptLoadTime?pointillist.scriptLoadTime:g,apiToken:API_TOKEN,setEventType:function(a){this.eventType=a},putCustomerActor:function(a,b){this.actors||(this.actors={},this.actors.CUSTOMER={}),this.actors.CUSTOMER||(this.actors.CUSTOMER={}),this.actors.CUSTOMER[a]=b},putActor:function(a,b,c,d){if(a&&b){var e=a.toUpperCase(),f="",g="";if(arguments.length>2){if(f=b.toUpperCase(),g=c,!c&&!d)return}else f=e+"_ID",g=b;this.actors||(this.actors={}),this.actors[e]||(this.actors[e]={}),this.actors[e][f]=g}},assignActor:function(a){this.actors||(this.actors={},this.actors.CUSTOMER={});for(var b in a)this.actors.CUSTOMER[b]=a[b]},putLabel:function(a,b){this.labels||(this.labels={}),b="number"!=typeof b&&"boolean"!=typeof b||"function"!=typeof b.toString?b:b.toString(),this.labels[a]=b&&b.length>255?b.substring(0,255):b},assignLabel:function(a){this.labels||(this.labels={});for(var b in a)this.labels[b]=a[b]},putLocation:function(a,b){this.location||(this.location={}),this.location[a]=b},assignLocation:function(a){this.location||(this.location={});for(var b in a)this.location[b]=a[b]},putValue:function(a,b){this.values||(this.values={}),this.values[a]=b},assignValue:function(a){this.values||(this.values={});for(var b in a)this.values[b]=a[b]},putFlexdata:function(a,b){this.flexdata||(this.flexdata={}),b=b&&b.length>255?b.substring(0,255):b,this.flexdata[a]=b},assignFlexdata:function(a){this.flexdata||(this.flexdata={});for(var b in a)this.flexdata[b]=a[b]},putNumber:function(a,b){this.numbers||(this.numbers={}),this.numbers[a]=b},assignNumber:function(a){this.numbers||(this.numbers={});for(var b in a)this.numbers[b]=a[b]},putDate:function(a,b){this.dates||(this.dates={}),this.dates[a]=b},assignDate:function(a){this.dates||(this.dates={});for(var b in a)this.dates[b]=a[b]}}};window.PointillistEvent=PointillistEvent,function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(a){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&b.disabled===!1&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ya(b))!==a)}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;d<e&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wa=function(a,b){return b?"\0"===a?"":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}}):(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&J)return b.getElementsByClassName(a)},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){
return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});var za=a.Sizzle;b.noConflict=function(){return a.Sizzle===b&&(a.Sizzle=za),b},a.pointillist.Sizzle=b}(window),function(a){var b=a._ptlt||{};b.getLocation=function(b){if(!b)return a.location;var c=document.createElement("a");return c.href=b,c},b.getPathName=function(a){var c=b.getLocation(a);return c.pathname?c.pathname:""},b.getPath=function(a){var c=b.getPathName(a);return c&&"/"!==c?c.replace(/^\/|\/$|\.[^.]*$/g,""):""},b.getPathByPosition=function(a,c){return b.getPathByPositions(a,a,c)},b.getPathByPositions=function(a,c,d){var e=[],f=b.getPath(d);if(f&&a>0){var g=f.split("/");!c||c<=a?e.push(g[a-1]):e=g.slice(a-1,c)}return e?e.join("/"):""},b.getPathLast=function(a,c){var d=[],e=b.getPath(c);if(e&&a>0){var f=e.split("/");f.length>0&&(d=f.slice(Math.max(f.length-a,0)))}return d?d.join("/"):""},b.getPathFirst=function(a,c){var d=[],e=b.getPath(c);if(e&&a>0){var f=e.split("/");f.length>0&&(d=f.slice(0,a))}return d?d.join("/"):""},b.getDistURLPathByPositions=function(a,c,d){d=d?d:"href";var e=b.getElementAttribute(d);return b.getPathByPositions(a,c,e)},b.getQueryParamByName=function(b,c){c=c||a.location.href,b=b.replace(/[\[\]]/g,"\\$&");var d=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)"),e=d.exec(c);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},b.getElementAttribute=function(c,d){var e=d?b.getElement(d):a.ptltFocusedElem,f="";return e&&"function"==typeof e.getAttribute&&(f=e.getAttribute(c)),f?f:""},b.getParentElemAttrByTagName=function(c,d,e,f,g,h){for(var i=h?b.getElement(h):a.ptltFocusedElem,j=0;j<10&&i&&0==i.getElementsByTagName(c).length;j++)i=i.parent();var k=i&&"function"==typeof i.getAttribute?i.getAttribute(d):"";if(k&&e){var l=k.split(e);k=f>-1?l[f]:k}return k?k:g?g:""},b.getRadioBtnLbl=function(a,c){var d=b.getElement(a),e=d?d.getAttribute("id"):"",f=e?b.getElement("label[for='"+e+"']"):"";return f?f.innerText:c?c:""},b.getSelectedRadioBtnLbl=function(a,c,d,e){var f=b.getElement(a+" input[type='radio']:checked"),g=f?f.getAttribute("id"):"",h=g?b.getElement("label[for='"+g+"']"):"",i=h?h.innerText||c:c||"",j=i?i.toLowerCase():i;return d=d?d.toLowerCase():d,d&&d===j&&e&&(i=b.getElementValue(e)),i?i:""},b.getCookie=function(a){if(!a)return"";var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?decodeURIComponent(c[1]):""},b.getMunchkinId=function(a,c){a=a?a:"_mkto_trk";var d=b.getCookie(a);if(d){var e=d.indexOf("token:"),f=e!==-1?e+"token:".length:0;d=d.substring(f,cookieValue.length)}return d?d:c?"":""+Math.ceil(1e9*Math.random())+"|"+Math.ceil(1e9*Math.random())+"|"+Math.ceil(1e9*Math.random())},b.getGACookie=function(){return b.getCookie("_ga")},b.getExpressionValue=function(b){return b?a.eval.call(a,b):""},b.getOperatedExpressionValue=function(c,d,e,f){f=f>-1?f:2;var g=b.getExpressionValue(c),h=b.getExpressionValue(d);h=isNaN(h)?h:Math.abs(h);var i=a.eval.call(a,g+e+h);return i?isNaN(i)?i:Number(i).toFixed(f):""},b.isChecked=function(a,c,d,e){c=void 0==c||c,d=void 0!=d&&d;var f=b.getElement(a),g=f?f.checked?c:d:"";return e?g+"":g},b.isAnyCheckedBox=function(a){var c=b.getElement(a+" input:checked");return!!(c&&c.size>0)},b.getSelectedOption=function(a,c){var d="",e=b.getElement(a),f=c?0:-1;return e&&e.options&&e.selectedIndex>f&&(d=e.options[e.selectedIndex]),d?d.text:""},b.getScrollTopPosition=function(a){var c=a?b.getElement(a):document.body;return c?""+c.scrollTop:""},b.getElementValue=function(a,c){var d=b.getElement(a),e=d?d.value||d.innerText:"";return e?c?e.toLowerCase():e:""},b.getElements=function(b){return b?a.pointillist.Sizzle(b):""},b.getElement=function(b){return b?a.pointillist.Sizzle(b)[0]:""},b.getFocusedElementValue=function(b){var c=a.ptltFocusedElem?a.ptltFocusedElem.value||a.ptltFocusedElem.innerText:"";return c?b?c.toLowerCase():c:""},b.setFocusedElement=function(b){a.ptltFocusedElem=b},b.getFocusedElement=function(){return a.ptltFocusedElem},b.clearFocusedElement=function(){a.ptltFocusedElem=""},b.setDomEvent=function(b){a.ptltDomEvt=b},b.getDomEvent=function(){return a.ptltDomEvt||{}},b.clearDomEvent=function(){a.ptltDomEvt=""},b.setAttrData=function(b){a.ptltAttrData=b},b.getAttrData=function(){return a.ptltAttrData||{}},b.clearAttrData=function(){a.ptltAttrData=""},b.setAdditionalAttrData=function(b){a.ptltAdditionalAttrData=b},b.getAdditionalAttrData=function(){return a.ptltAdditionalAttrData||{}},b.clearAdditionalAttrData=function(){a.ptltAdditionalAttrData=""},b.fireEvent=function(a,b,c){if(!a||!b||0===b.length)return 0;var d=utillities||new Utillities;return d.fireEvent(a,b,c)},a._ptlt=b}(window);var analyticsUtil=new AnalyticsUtility,utillities=new Utillities,cntrl="",streamer=null;"undefined"!=typeof EventEditorController&&(cntrl=new EventEditorController(new VisualizerAPI(window.pointillist&&window.pointillist.args?window.pointillist.args[0]:void 0)));var sizzleTemp=null;window.pointillist&&(sizzleTemp=window.pointillist.Sizzle);var pointillist={version:VERSION_NUMBER,actionBuffer:[],apiToken:"",streamEventEndpoint:"",eventController:cntrl,Sizzle:sizzleTemp,track:function(a,b,c){},loadConsumableData:function(a){if(TENANT_DATA=a,pointillist.streamer.currentStep){if(1==pointillist.streamer.currentStep)pointillist.streamer.currentStep=2;else if(2!=pointillist.streamer.currentStep)return}else pointillist.streamer.currentStep=1;a&&window.pointillist.streamer&&window.pointillist.streamer.pageLoad()},loadCommonBaseAttrs:function(a){COMMON_BASELINE_ATTRIBUTES=a},getUriParser:function(a){return a=a?a:window.location.href,parseUri(a)},getReferringDomain:function(a){if(!a)return"";var b=parseUri(a);return b.host},getUAParser:function(){return UAParser(window)},getPageTitle:function(){return window.title},getLandingPageURL:function(){return COMMON_BASELINE_ATTRIBUTES.landingPageUrl},getTrafficSource:function(){return COMMON_BASELINE_ATTRIBUTES.trafficSource},getPointillistCookieID:function(){return analyticsUtil.getCookie("_pointillist_cookie_id")},getPointillistSessionID:function(){return analyticsUtil.getCookie("_pointillist_session_id")},getQueryVariable:function(a){return analyticsUtil.getQueryVariable(a)},setDefaultAttributes:function(a,b){return utillities.setDefaultAttributes(a,b)}};"object"!=typeof window.pointillist||window.pointillist.version!==VERSION_NUMBER?(window.pointillist&&(pointillist.actionBuffer.concat(window.pointillist),pointillist.consumableData=window.pointillist.consumableData,pointillist.args=window.pointillist.args||[]),3==pointillist.args.length||4==pointillist.args.length&&(1==pointillist.args[3]||"true"==pointillist.args[3]||""==pointillist.args[3]||"null"==pointillist.args[3]||"undefined"==pointillist.args[3])?pointillist.apiToken=pointillist.args[1]:4!=pointillist.args.length&&(5!=pointillist.args.length||1!=pointillist.args[4]&&"true"!=pointillist.args[4]&&""!=pointillist.args[4]&&"null"!=pointillist.args[4]&&"undefined"!=pointillist.args[4])||(pointillist.apiToken=pointillist.args[2]),window.pointillist.dpEndpoint&&(pointillist.dpEndpoint=window.pointillist.dpEndpoint),window.pointillist.primaryActor&&(pointillist.primaryActor=window.pointillist.primaryActor),window.pointillist.actorIdsMapping&&(pointillist.actorIdsMapping=window.pointillist.actorIdsMapping),window.pointillist=pointillist,window.getPointillistNameSpace=function(){return window.pointillist}):window.pointillist.eventController||(window.pointillist.eventController=cntrl),function(){var a=pointillist.getPointillistCookieID(),b=analyticsUtil.getCookie("temp_pointillist_cookie_id");b||(analyticsUtil.setTempPointillistCookieId(),a&&analyticsUtil.setPointillistCookieId(a)),a||(analyticsUtil.setTempPointillistCookieId(),analyticsUtil.setPointillistCookieId()),""===pointillist.getPointillistSessionID()&&analyticsUtil.setOrRefreshPointillistSessionId();var c=analyticsUtil.getLandingPageCookie(),d=analyticsUtil.getTrafficSourceCookie();analyticsUtil.setReferringURLCookie(document.referrer);var e=analyticsUtil.getParentDomain(analyticsUtil.getDomain(analyticsUtil.getCurrentDomainCookie())),f=analyticsUtil.getRootDomain(),g=analyticsUtil.getParentDomain(analyticsUtil.getDomain(document.referrer)),h=analyticsUtil.getParentDomain(analyticsUtil.getDomain(d)),i=!1;if(g!=f&&(e!=f||g&&g!=h)&&(analyticsUtil.setLandingPageCookie(window.location.href),c=analyticsUtil.getLandingPageCookie(),analyticsUtil.setTrafficSourceCookie(document.referrer),analyticsUtil.setOrRefreshPointillistSessionId(!!g),d=analyticsUtil.getTrafficSourceCookie(),analyticsUtil.refreshUTMCookies(),analyticsUtil.setCurrentDomainCookie(window.location.href),i=!0),pointillist.loadCommonBaseAttrs({landingPageUrl:c,trafficSource:d}),"undefined"==typeof EventEditorController){null==pointillist.streamer?(streamer=new Pointillist_Streamer(i),pointillist.streamer=streamer):streamer=pointillist.streamer;var j=new Date,k=1+j.getUTCMonth(),l=j.getUTCFullYear()+"-"+k+"-"+j.getUTCDate()+" "+j.getUTCHours()+":"+j.getUTCMinutes()+":"+j.getUTCSeconds()+"+0000";if(pointillist.scriptLoadTime=l,streamer.sendStartEvent(null),pointillist.consumableData&&pointillist.loadConsumableData(pointillist.consumableData),streamer.getConsumableData()){if(1==streamer.currentStep)streamer.currentStep=2;else if(2!=streamer.currentStep)return;streamer.pageLoad()}}}()}();